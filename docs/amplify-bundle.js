var cr="Logging",gt="x-amz-user-agent",ur="NoHubcallbackProvidedException";var b;(function(e){e.DEBUG="DEBUG",e.ERROR="ERROR",e.INFO="INFO",e.WARN="WARN",e.VERBOSE="VERBOSE",e.NONE="NONE"})(b||(b={}));var fr={VERBOSE:1,DEBUG:2,INFO:3,WARN:4,ERROR:5,NONE:6},y=class e{constructor(t,r=b.WARN){this.name=t,this.level=r,this._pluggables=[]}_padding(t){return t<10?"0"+t:""+t}_ts(){let t=new Date;return[this._padding(t.getMinutes()),this._padding(t.getSeconds())].join(":")+"."+t.getMilliseconds()}configure(t){return t?(this._config=t,this._config):this._config}_log(t,...r){let o=this.level;e.LOG_LEVEL&&(o=e.LOG_LEVEL),typeof window<"u"&&window.LOG_LEVEL&&(o=window.LOG_LEVEL);let n=fr[o];if(!(fr[t]>=n))return;let s=console.log.bind(console);t===b.ERROR&&console.error&&(s=console.error.bind(console)),t===b.WARN&&console.warn&&(s=console.warn.bind(console)),e.BIND_ALL_LOG_LEVELS&&(t===b.INFO&&console.info&&(s=console.info.bind(console)),t===b.DEBUG&&console.debug&&(s=console.debug.bind(console)));let c=`[${t}] ${this._ts()} ${this.name}`,u="";if(r.length===1&&typeof r[0]=="string")u=`${c} - ${r[0]}`,s(u);else if(r.length===1)u=`${c} ${r[0]}`,s(c,r[0]);else if(typeof r[0]=="string"){let a=r.slice(1);a.length===1&&(a=a[0]),u=`${c} - ${r[0]} ${a}`,s(`${c} - ${r[0]}`,a)}else u=`${c} ${r}`,s(c,r);for(let a of this._pluggables){let f={message:u,timestamp:Date.now()};a.pushLogs([f])}}log(...t){this._log(b.INFO,...t)}info(...t){this._log(b.INFO,...t)}warn(...t){this._log(b.WARN,...t)}error(...t){this._log(b.ERROR,...t)}debug(...t){this._log(b.DEBUG,...t)}verbose(...t){this._log(b.VERBOSE,...t)}addPluggable(t){t&&t.getCategoryName()===cr&&(this._pluggables.push(t),t.configure(this._config))}listPluggables(){return this._pluggables}};y.LOG_LEVEL=null;y.BIND_ALL_LOG_LEVELS=!1;var w=class e extends Error{constructor({message:t,name:r,recoverySuggestion:o,underlyingError:n,metadata:i}){if(super(t),this.name=r,this.underlyingError=n,this.recoverySuggestion=o,i){let{extendedRequestId:s,httpStatusCode:c,requestId:u}=i;this.metadata={extendedRequestId:s,httpStatusCode:c,requestId:u}}this.constructor=e,Object.setPrototypeOf(this,e.prototype)}};var D;(function(e){e.NoEndpointId="NoEndpointId",e.PlatformNotSupported="PlatformNotSupported",e.Unknown="Unknown",e.NetworkError="NetworkError"})(D||(D={}));var $=(e,t=w)=>(r,o,n)=>{let{message:i,recoverySuggestion:s}=e[o];if(!r)throw new t({name:o,message:n?`${i} ${n}`:i,recoverySuggestion:s})};var O=typeof Symbol<"u"?Symbol("amplify_default"):"@@amplify_default",me=new y("Hub"),Ue=class{constructor(t){this.listeners=new Map,this.protectedChannels=["core","auth","api","analytics","interactions","pubsub","storage","ui","xr"],this.name=t}_remove(t,r){let o=this.listeners.get(t);if(!o){me.warn(`No listeners for ${t}`);return}this.listeners.set(t,[...o.filter(({callback:n})=>n!==r)])}dispatch(t,r,o,n){typeof t=="string"&&this.protectedChannels.indexOf(t)>-1&&(n===O||me.warn(`WARNING: ${t} is protected and dispatching on it can have unintended consequences`));let i={channel:t,payload:{...r},source:o,patternInfo:[]};try{this._toListeners(i)}catch(s){me.error(s)}}listen(t,r,o="noname"){let n;if(typeof r!="function")throw new w({name:ur,message:"No callback supplied to Hub"});n=r;let i=this.listeners.get(t);return i||(i=[],this.listeners.set(t,i)),i.push({name:o,callback:n}),()=>{this._remove(t,n)}}_toListeners(t){let{channel:r,payload:o}=t,n=this.listeners.get(r);n&&n.forEach(i=>{me.debug(`Dispatching to ${r} with `,o);try{i.callback(t)}catch(s){me.error(s)}})}},U=new Ue("__default__"),an=new Ue("internal-hub");var ge=()=>{if(typeof window=="object"&&typeof window.crypto=="object")return window.crypto;if(typeof crypto=="object")return crypto;throw new w({name:"MissingPolyfill",message:"Cannot resolve the `crypto` function from the environment."})},lr=()=>{if(typeof window<"u"&&typeof window.btoa=="function")return window.btoa;if(typeof btoa=="function")return btoa;throw new w({name:"Base64EncoderError",message:"Cannot resolve the `btoa` function from the environment."})},dr=()=>{if(typeof window<"u"&&typeof window.atob=="function")return window.atob;if(typeof atob=="function")return atob;throw new w({name:"Base64EncoderError",message:"Cannot resolve the `atob` function from the environment."})};var pr={convert(e,t){let r=e;return t?.urlSafe&&(r=r.replace(/-/g,"+").replace(/_/g,"/")),dr()(r)}};var W;(function(e){e.AuthTokenConfigException="AuthTokenConfigException",e.AuthUserPoolAndIdentityPoolException="AuthUserPoolAndIdentityPoolException",e.AuthUserPoolException="AuthUserPoolException",e.InvalidIdentityPoolIdException="InvalidIdentityPoolIdException",e.OAuthNotConfigureException="OAuthNotConfigureException"})(W||(W={}));var cn={[W.AuthTokenConfigException]:{message:"Auth Token Provider not configured.",recoverySuggestion:"Make sure to call Amplify.configure in your app."},[W.AuthUserPoolAndIdentityPoolException]:{message:"Auth UserPool or IdentityPool not configured.",recoverySuggestion:"Make sure to call Amplify.configure in your app with UserPoolId and IdentityPoolId."},[W.AuthUserPoolException]:{message:"Auth UserPool not configured.",recoverySuggestion:"Make sure to call Amplify.configure in your app with userPoolId and userPoolClientId."},[W.InvalidIdentityPoolIdException]:{message:"Invalid identity pool id provided.",recoverySuggestion:"Make sure a valid identityPoolId is given in the config."},[W.OAuthNotConfigureException]:{message:"oauth param not configured.",recoverySuggestion:"Make sure to call Amplify.configure with oauth parameter in your app."}},ht=$(cn);function h(e){let t=!0;e?t=!!e.userPoolId&&!!e.userPoolClientId:t=!1,ht(t,W.AuthUserPoolException)}function he(e){let t=!!e?.loginWith?.oauth?.domain&&!!e?.loginWith?.oauth?.redirectSignOut&&!!e?.loginWith?.oauth?.redirectSignIn&&!!e?.loginWith?.oauth?.responseType;ht(t,W.OAuthNotConfigureException)}function P(e){let t=e.split(".");if(t.length!==3)throw new Error("Invalid token");try{let o=t[1].replace(/-/g,"+").replace(/_/g,"/"),n=decodeURIComponent(pr.convert(o).split("").map(s=>`%${`00${s.charCodeAt(0).toString(16)}`.slice(-2)}`).join("")),i=JSON.parse(n);return{toString:()=>e,payload:i}}catch{throw new Error("Invalid token payload")}}var yt=e=>{let t=Reflect.ownKeys(e);for(let r of t){let o=e[r];(o&&typeof o=="object"||typeof o=="function")&&yt(o)}return Object.freeze(e)};var un=new y("parseAWSExports"),fn={API_KEY:"apiKey",AWS_IAM:"iam",AMAZON_COGNITO_USER_POOLS:"userPool",OPENID_CONNECT:"oidc",NONE:"none",AWS_LAMBDA:"lambda",LAMBDA:"lambda"},gr=(e={})=>{if(!Object.prototype.hasOwnProperty.call(e,"aws_project_region"))throw new w({name:"InvalidParameterException",message:"Invalid config parameter.",recoverySuggestion:"Ensure passing the config object imported from  `amplifyconfiguration.json`."});let{aws_appsync_apiKey:t,aws_appsync_authenticationType:r,aws_appsync_graphqlEndpoint:o,aws_appsync_region:n,aws_bots_config:i,aws_cognito_identity_pool_id:s,aws_cognito_sign_up_verification_method:c,aws_cognito_mfa_configuration:u,aws_cognito_mfa_types:a,aws_cognito_password_protection_settings:f,aws_cognito_verification_mechanisms:m,aws_cognito_signup_attributes:d,aws_cognito_social_providers:l,aws_cognito_username_attributes:_,aws_mandatory_sign_in:N,aws_mobile_analytics_app_id:K,aws_mobile_analytics_app_region:Y,aws_user_files_s3_bucket:re,aws_user_files_s3_bucket_region:Pe,aws_user_files_s3_dangerously_connect_to_http_endpoint_for_testing:be,aws_user_pools_id:ce,aws_user_pools_web_client_id:ue,geo:C,oauth:de,predictions:k,aws_cloud_logic_custom:Oe,Notifications:Re,modelIntrospection:pe}=e,T={};K&&(T.Analytics={Pinpoint:{appId:K,region:Y}});let{InAppMessaging:pt,Push:mt}=Re??{};if(pt?.AWSPinpoint||mt?.AWSPinpoint){if(pt?.AWSPinpoint){let{appId:E,region:oe}=pt.AWSPinpoint;T.Notifications={InAppMessaging:{Pinpoint:{appId:E,region:oe}}}}if(mt?.AWSPinpoint){let{appId:E,region:oe}=mt.AWSPinpoint;T.Notifications={...T.Notifications,PushNotification:{Pinpoint:{appId:E,region:oe}}}}}if(Array.isArray(i)&&(T.Interactions={LexV1:Object.fromEntries(i.map(E=>[E.name,E]))}),o){let E=fn[r];E||un.debug(`Invalid authentication type ${r}. Falling back to IAM.`),T.API={GraphQL:{endpoint:o,apiKey:t,region:n,defaultAuthMode:E??"iam"}},pe&&(T.API.GraphQL.modelIntrospection=pe)}let Zo=u?{status:u&&u.toLowerCase(),totpEnabled:a?.includes("TOTP")??!1,smsEnabled:a?.includes("SMS")??!1}:void 0,en=f?{minLength:f.passwordPolicyMinLength,requireLowercase:f.passwordPolicyCharacters?.includes("REQUIRES_LOWERCASE")??!1,requireUppercase:f.passwordPolicyCharacters?.includes("REQUIRES_UPPERCASE")??!1,requireNumbers:f.passwordPolicyCharacters?.includes("REQUIRES_NUMBERS")??!1,requireSpecialCharacters:f.passwordPolicyCharacters?.includes("REQUIRES_SYMBOLS")??!1}:void 0,tn=Array.from(new Set([...m??[],...d??[]])).reduce((E,oe)=>({...E,[oe.toLowerCase()]:{required:!0}}),{}),nr=_?.includes("EMAIL")??!1,ir=_?.includes("PHONE_NUMBER")??!1;(s||ce)&&(T.Auth={Cognito:{identityPoolId:s,allowGuestAccess:N!=="enable",signUpVerificationMethod:c,userAttributes:tn,userPoolClientId:ue,userPoolId:ce,mfa:Zo,passwordFormat:en,loginWith:{username:!(nr||ir),email:nr,phone:ir}}});let rn=de?Object.keys(de).length>0:!1,on=l?l.length>0:!1;if(T.Auth&&rn&&(T.Auth.Cognito.loginWith={...T.Auth.Cognito.loginWith,oauth:{...ln(de),...on&&{providers:dn(l)}}}),re&&(T.Storage={S3:{bucket:re,region:Pe,dangerouslyConnectToHttpEndpointForTesting:be}}),C){let{amazon_location_service:E}=C;T.Geo={LocationService:{maps:E.maps,geofenceCollections:E.geofenceCollections,searchIndices:E.search_indices,region:E.region}}}if(Oe&&(T.API={...T.API,REST:Oe.reduce((E,oe)=>{let{name:nn,endpoint:sn,region:sr,service:ar}=oe;return{...E,[nn]:{endpoint:sn,...ar?{service:ar}:void 0,...sr?{region:sr}:void 0}}},{})}),k){let{VoiceId:E}=k?.convert?.speechGenerator?.defaults??{};T.Predictions=E?{...k,convert:{...k.convert,speechGenerator:{...k.convert.speechGenerator,defaults:{voiceId:E}}}}:k}return T},mr=e=>e?.split(",")??[],ln=({domain:e,scope:t,redirectSignIn:r,redirectSignOut:o,responseType:n})=>({domain:e,scopes:t,redirectSignIn:mr(r),redirectSignOut:mr(o),responseType:n}),dn=e=>e.map(t=>{let r=t.toLowerCase();return r.charAt(0).toUpperCase()+r.slice(1)});var ye=Symbol("oauth-listener");var v=[];for(let e=0;e<256;++e)v.push((e+256).toString(16).slice(1));function hr(e,t=0){return(v[e[t+0]]+v[e[t+1]]+v[e[t+2]]+v[e[t+3]]+"-"+v[e[t+4]]+v[e[t+5]]+"-"+v[e[t+6]]+v[e[t+7]]+"-"+v[e[t+8]]+v[e[t+9]]+"-"+v[e[t+10]]+v[e[t+11]]+v[e[t+12]]+v[e[t+13]]+v[e[t+14]]+v[e[t+15]]).toLowerCase()}var St,pn=new Uint8Array(16);function Et(){if(!St){if(typeof crypto>"u"||!crypto.getRandomValues)throw new Error("crypto.getRandomValues() not supported. See https://github.com/uuidjs/uuid#getrandomvalues-not-supported");St=crypto.getRandomValues.bind(crypto)}return St(pn)}var mn=typeof crypto<"u"&&crypto.randomUUID&&crypto.randomUUID.bind(crypto),wt={randomUUID:mn};function gn(e,t,r){if(wt.randomUUID&&!t&&!e)return wt.randomUUID();e=e||{};let o=e.random??e.rng?.()??Et();if(o.length<16)throw new Error("Random bytes length must be >= 16");if(o[6]=o[6]&15|64,o[8]=o[8]&63|128,t){if(r=r||0,r<0||r+16>t.length)throw new RangeError(`UUID byte range ${r}:${r+15} is out of buffer bounds`);for(let n=0;n<16;++n)t[r+n]=o[n];return t}return hr(o)}var It=gn;function Sr(e){let{version:t}=e;return t?t.startsWith("1"):!1}function hn(e){if(!e)return;let{bucket_name:t,aws_region:r,buckets:o}=e;return{S3:{bucket:t,region:r,buckets:o&&Tn(o)}}}function yn(e){if(!e)return;let{user_pool_id:t,user_pool_client_id:r,identity_pool_id:o,password_policy:n,mfa_configuration:i,mfa_methods:s,unauthenticated_identities_enabled:c,oauth:u,username_attributes:a,standard_required_attributes:f,groups:m,passwordless:d}=e,l={Cognito:{userPoolId:t,userPoolClientId:r,groups:m}};return o&&(l.Cognito={...l.Cognito,identityPoolId:o}),n&&(l.Cognito.passwordFormat={requireLowercase:n.require_lowercase,requireNumbers:n.require_numbers,requireUppercase:n.require_uppercase,requireSpecialCharacters:n.require_symbols,minLength:n.min_length??6}),i&&(l.Cognito.mfa={status:xn(i),smsEnabled:s?.includes("SMS"),totpEnabled:s?.includes("TOTP")}),c&&(l.Cognito.allowGuestAccess=c),u&&(l.Cognito.loginWith={oauth:{domain:u.domain,redirectSignIn:u.redirect_sign_in_uri,redirectSignOut:u.redirect_sign_out_uri,responseType:u.response_type==="token"?"token":"code",scopes:u.scopes,providers:Cn(u.identity_providers)}}),a&&(l.Cognito.loginWith={...l.Cognito.loginWith,email:a.includes("email"),phone:a.includes("phone_number"),username:a.includes("username")}),f&&(l.Cognito.userAttributes=f.reduce((_,N)=>({..._,[N]:{required:!0}}),{})),d&&(l.Cognito.passwordless={emailOtpEnabled:d.email_otp_enabled,smsOtpEnabled:d.sms_otp_enabled,webAuthn:d.web_authn?{relyingPartyId:d.web_authn.relying_party_id,userVerification:d.web_authn.user_verification}:void 0,preferredChallenge:d.preferred_challenge}),l}function Sn(e){if(!e?.amazon_pinpoint)return;let{amazon_pinpoint:t}=e;return{Pinpoint:{appId:t.app_id,region:t.aws_region}}}function En(e){if(!e)return;let{aws_region:t,geofence_collections:r,maps:o,search_indices:n}=e;return{LocationService:{region:t,searchIndices:n,geofenceCollections:r,maps:o}}}function wn(e){if(!e)return;let{aws_region:t,default_authorization_type:r,url:o,api_key:n,model_introspection:i}=e;return{GraphQL:{endpoint:o,defaultAuthMode:wr(r),region:t,apiKey:n,modelIntrospection:i}}}function In(e){if(!e?.events)return;let{url:t,aws_region:r,api_key:o,default_authorization_type:n}=e.events;return{Events:{endpoint:t,defaultAuthMode:wr(n),region:r,apiKey:o}}}function An(e){if(!e)return;let{aws_region:t,channels:r,amazon_pinpoint_app_id:o}=e,n=r.includes("IN_APP_MESSAGING"),i=r.includes("APNS")||r.includes("FCM");if(!(n||i))return;let s={};return n&&(s.InAppMessaging={Pinpoint:{appId:o,region:t}}),i&&(s.PushNotification={Pinpoint:{appId:o,region:t}}),s}function Er(e){let t={};if(e.storage&&(t.Storage=hn(e.storage)),e.auth&&(t.Auth=yn(e.auth)),e.analytics&&(t.Analytics=Sn(e.analytics)),e.geo&&(t.Geo=En(e.geo)),e.data&&(t.API=wn(e.data)),e.custom){let r=In(e.custom);r&&"Events"in r&&(t.API={...t.API,...r})}return e.notifications&&(t.Notifications=An(e.notifications)),t}var _n={AMAZON_COGNITO_USER_POOLS:"userPool",API_KEY:"apiKey",AWS_IAM:"iam",AWS_LAMBDA:"lambda",OPENID_CONNECT:"oidc"};function wr(e){return _n[e]}var yr={GOOGLE:"Google",LOGIN_WITH_AMAZON:"Amazon",FACEBOOK:"Facebook",SIGN_IN_WITH_APPLE:"Apple"};function Cn(e=[]){return e.reduce((t,r)=>(yr[r]!==void 0&&t.push(yr[r]),t),[])}function xn(e){return e==="OPTIONAL"?"optional":e==="REQUIRED"?"on":"off"}function Tn(e){let t={};return e.forEach(({name:r,bucket_name:o,aws_region:n,paths:i})=>{if(r in t)throw new Error(`Duplicate friendly name found: ${r}. Name must be unique.`);let s=i?Object.entries(i).reduce((c,[u,a])=>(a!==void 0&&(c[u]=a),c),{}):void 0;t[r]={bucketName:o,region:n,paths:s}}),t}var Ir=e=>Object.keys(e).some(t=>t.startsWith("aws_"))?gr(e):Sr(e)?Er(e):e;function Ar(e,t,r,o){function n(i){return i instanceof r?i:new r(function(s){s(i)})}return new(r||(r=Promise))(function(i,s){function c(f){try{a(o.next(f))}catch(m){s(m)}}function u(f){try{a(o.throw(f))}catch(m){s(m)}}function a(f){f.done?i(f.value):n(f.value).then(c,u)}a((o=o.apply(e,t||[])).next())})}function _r(e,t){var r={label:0,sent:function(){if(i[0]&1)throw i[1];return i[1]},trys:[],ops:[]},o,n,i,s=Object.create((typeof Iterator=="function"?Iterator:Object).prototype);return s.next=c(0),s.throw=c(1),s.return=c(2),typeof Symbol=="function"&&(s[Symbol.iterator]=function(){return this}),s;function c(a){return function(f){return u([a,f])}}function u(a){if(o)throw new TypeError("Generator is already executing.");for(;s&&(s=0,a[0]&&(r=0)),r;)try{if(o=1,n&&(i=a[0]&2?n.return:a[0]?n.throw||((i=n.return)&&i.call(n),0):n.next)&&!(i=i.call(n,a[1])).done)return i;switch(n=0,i&&(a=[a[0]&2,i.value]),a[0]){case 0:case 1:i=a;break;case 4:return r.label++,{value:a[1],done:!1};case 5:r.label++,n=a[1],a=[0];continue;case 7:a=r.ops.pop(),r.trys.pop();continue;default:if(i=r.trys,!(i=i.length>0&&i[i.length-1])&&(a[0]===6||a[0]===2)){r=0;continue}if(a[0]===3&&(!i||a[1]>i[0]&&a[1]<i[3])){r.label=a[1];break}if(a[0]===6&&r.label<i[1]){r.label=i[1],i=a;break}if(i&&r.label<i[2]){r.label=i[2],r.ops.push(a);break}i[2]&&r.ops.pop(),r.trys.pop();continue}a=t.call(e,r)}catch(f){a=[6,f],n=0}finally{o=i=0}if(a[0]&5)throw a[1];return{value:a[0]?a[1]:void 0,done:!0}}}var R=64,Cr=32,xr=new Uint32Array([1116352408,1899447441,3049323471,3921009573,961987163,1508970993,2453635748,2870763221,3624381080,310598401,607225278,1426881987,1925078388,2162078206,2614888103,3248222580,3835390401,4022224774,264347078,604807628,770255983,1249150122,1555081692,1996064986,2554220882,2821834349,2952996808,3210313671,3336571891,3584528711,113926993,338241895,666307205,773529912,1294757372,1396182291,1695183700,1986661051,2177026350,2456956037,2730485921,2820302411,3259730800,3345764771,3516065817,3600352804,4094571909,275423344,430227734,506948616,659060556,883997877,958139571,1322822218,1537002063,1747873779,1955562222,2024104815,2227730452,2361852424,2428436474,2756734187,3204031479,3329325298]),Tr=[1779033703,3144134277,1013904242,2773480762,1359893119,2600822924,528734635,1541459225],vr=Math.pow(2,53)-1;var Se=function(){function e(){this.state=Int32Array.from(Tr),this.temp=new Int32Array(64),this.buffer=new Uint8Array(64),this.bufferLength=0,this.bytesHashed=0,this.finished=!1}return e.prototype.update=function(t){if(this.finished)throw new Error("Attempted to update an already finished hash.");var r=0,o=t.byteLength;if(this.bytesHashed+=o,this.bytesHashed*8>vr)throw new Error("Cannot hash more than 2^53 - 1 bits");for(;o>0;)this.buffer[this.bufferLength++]=t[r++],o--,this.bufferLength===R&&(this.hashBuffer(),this.bufferLength=0)},e.prototype.digest=function(){if(!this.finished){var t=this.bytesHashed*8,r=new DataView(this.buffer.buffer,this.buffer.byteOffset,this.buffer.byteLength),o=this.bufferLength;if(r.setUint8(this.bufferLength++,128),o%R>=R-8){for(var n=this.bufferLength;n<R;n++)r.setUint8(n,0);this.hashBuffer(),this.bufferLength=0}for(var n=this.bufferLength;n<R-8;n++)r.setUint8(n,0);r.setUint32(R-8,Math.floor(t/4294967296),!0),r.setUint32(R-4,t),this.hashBuffer(),this.finished=!0}for(var i=new Uint8Array(Cr),n=0;n<8;n++)i[n*4]=this.state[n]>>>24&255,i[n*4+1]=this.state[n]>>>16&255,i[n*4+2]=this.state[n]>>>8&255,i[n*4+3]=this.state[n]>>>0&255;return i},e.prototype.hashBuffer=function(){for(var t=this,r=t.buffer,o=t.state,n=o[0],i=o[1],s=o[2],c=o[3],u=o[4],a=o[5],f=o[6],m=o[7],d=0;d<R;d++){if(d<16)this.temp[d]=(r[d*4]&255)<<24|(r[d*4+1]&255)<<16|(r[d*4+2]&255)<<8|r[d*4+3]&255;else{var l=this.temp[d-2],_=(l>>>17|l<<15)^(l>>>19|l<<13)^l>>>10;l=this.temp[d-15];var N=(l>>>7|l<<25)^(l>>>18|l<<14)^l>>>3;this.temp[d]=(_+this.temp[d-7]|0)+(N+this.temp[d-16]|0)}var K=(((u>>>6|u<<26)^(u>>>11|u<<21)^(u>>>25|u<<7))+(u&a^~u&f)|0)+(m+(xr[d]+this.temp[d]|0)|0)|0,Y=((n>>>2|n<<30)^(n>>>13|n<<19)^(n>>>22|n<<10))+(n&i^n&s^i&s)|0;m=f,f=a,a=u,u=c+K|0,c=s,s=i,i=n,n=K+Y|0}o[0]+=n,o[1]+=i,o[2]+=s,o[3]+=c,o[4]+=u,o[5]+=a,o[6]+=f,o[7]+=m},e}();var At=e=>new TextEncoder().encode(e);var vn=typeof Buffer<"u"&&Buffer.from?function(e){return Buffer.from(e,"utf8")}:At;function Ne(e){return e instanceof Uint8Array?e:typeof e=="string"?vn(e):ArrayBuffer.isView(e)?new Uint8Array(e.buffer,e.byteOffset,e.byteLength/Uint8Array.BYTES_PER_ELEMENT):new Uint8Array(e)}function _t(e){return typeof e=="string"?e.length===0:e.byteLength===0}var Pr=function(){function e(t){this.secret=t,this.hash=new Se,this.reset()}return e.prototype.update=function(t){if(!(_t(t)||this.error))try{this.hash.update(Ne(t))}catch(r){this.error=r}},e.prototype.digestSync=function(){if(this.error)throw this.error;return this.outer?(this.outer.finished||this.outer.update(this.hash.digest()),this.outer.digest()):this.hash.digest()},e.prototype.digest=function(){return Ar(this,void 0,void 0,function(){return _r(this,function(t){return[2,this.digestSync()]})})},e.prototype.reset=function(){if(this.hash=new Se,this.secret){this.outer=new Se;var t=Pn(this.secret),r=new Uint8Array(R);r.set(t);for(var o=0;o<R;o++)t[o]^=54,r[o]^=92;this.hash.update(t),this.outer.update(r);for(var o=0;o<t.byteLength;o++)t[o]=0}},e}();function Pn(e){var t=Ne(e);if(t.byteLength>R){var r=new Se;r.update(t),t=r.digest()}var o=new Uint8Array(R);return o.set(t),o}var bn={},On={};for(let e=0;e<256;e++){let t=e.toString(16).toLowerCase();t.length===1&&(t=`0${t}`),bn[e]=t,On[t]=e}var g;(function(e){e.WebUnknown="0",e.React="1",e.NextJs="2",e.Angular="3",e.VueJs="4",e.Nuxt="5",e.Svelte="6",e.ServerSideUnknown="100",e.ReactSSR="101",e.NextJsSSR="102",e.AngularSSR="103",e.VueJsSSR="104",e.NuxtSSR="105",e.SvelteSSR="106",e.ReactNative="201",e.Expo="202"})(g||(g={}));var Ee;(function(e){e.AI="ai",e.API="api",e.Auth="auth",e.Analytics="analytics",e.DataStore="datastore",e.Geo="geo",e.InAppMessaging="inappmessaging",e.Interactions="interactions",e.Predictions="predictions",e.PubSub="pubsub",e.PushNotification="pushnotification",e.Storage="storage"})(Ee||(Ee={}));var Ct;(function(e){e.CreateConversation="1",e.GetConversation="2",e.ListConversations="3",e.DeleteConversation="4",e.SendMessage="5",e.ListMessages="6",e.OnMessage="7",e.Generation="8",e.UpdateConversation="9"})(Ct||(Ct={}));var xt;(function(e){e.Record="1",e.IdentifyUser="2"})(xt||(xt={}));var Tt;(function(e){e.GraphQl="1",e.Get="2",e.Post="3",e.Put="4",e.Patch="5",e.Del="6",e.Head="7"})(Tt||(Tt={}));var ne;(function(e){e.SignUp="1",e.ConfirmSignUp="2",e.ResendSignUpCode="3",e.SignIn="4",e.FetchMFAPreference="6",e.UpdateMFAPreference="7",e.SetUpTOTP="10",e.VerifyTOTPSetup="11",e.ConfirmSignIn="12",e.DeleteUserAttributes="15",e.DeleteUser="16",e.UpdateUserAttributes="17",e.FetchUserAttributes="18",e.ConfirmUserAttribute="22",e.SignOut="26",e.UpdatePassword="27",e.ResetPassword="28",e.ConfirmResetPassword="29",e.FederatedSignIn="30",e.RememberDevice="32",e.ForgetDevice="33",e.FetchDevices="34",e.SendUserAttributeVerificationCode="35",e.SignInWithRedirect="36",e.StartWebAuthnRegistration="37",e.CompleteWebAuthnRegistration="38",e.ListWebAuthnCredentials="39",e.DeleteWebAuthnCredential="40"})(ne||(ne={}));var vt;(function(e){e.Subscribe="1",e.GraphQl="2"})(vt||(vt={}));var Pt;(function(e){e.SearchByText="0",e.SearchByCoordinates="1",e.SearchForSuggestions="2",e.SearchByPlaceId="3",e.SaveGeofences="4",e.GetGeofence="5",e.ListGeofences="6",e.DeleteGeofences="7"})(Pt||(Pt={}));var bt;(function(e){e.SyncMessages="1",e.IdentifyUser="2",e.NotifyMessageInteraction="3"})(bt||(bt={}));var Ot;(function(e){e.None="0"})(Ot||(Ot={}));var Rt;(function(e){e.Convert="1",e.Identify="2",e.Interpret="3"})(Rt||(Rt={}));var Ut;(function(e){e.Subscribe="1"})(Ut||(Ut={}));var Nt;(function(e){e.InitializePushNotifications="1",e.IdentifyUser="2"})(Nt||(Nt={}));var Mt;(function(e){e.UploadData="1",e.DownloadData="2",e.List="3",e.Copy="4",e.Remove="5",e.GetProperties="6",e.GetUrl="7",e.GetDataAccess="8",e.ListCallerAccessGrants="9"})(Mt||(Mt={}));var kt="6.16.2";var J=()=>typeof global<"u";var M=()=>typeof window<"u",Me=()=>typeof document<"u",fe=()=>typeof process<"u",X=(e,t)=>!!Object.keys(e).find(r=>r.startsWith(t));function br(){let e=o=>o.startsWith("_react")||o.startsWith("__react"),t=o=>Object.keys(o).find(e),r=()=>Array.from(document.querySelectorAll("[id]"));return Me()&&r().some(t)}function Or(){return fe()&&typeof process.env<"u"&&!!Object.keys(process.env).find(e=>e.includes("react"))}function Rr(){return M()&&X(window,"__VUE")}function Ur(){return J()&&X(global,"__VUE")}function Nr(){return M()&&X(window,"__SVELTE")}function Mr(){return fe()&&typeof process.env<"u"&&!!Object.keys(process.env).find(e=>e.includes("svelte"))}function kr(){return M()&&window.next&&typeof window.next=="object"}function Dr(){return J()&&(X(global,"__next")||X(global,"__NEXT"))}function Lr(){return M()&&(window.__NUXT__!==void 0||window.$nuxt!==void 0)}function Fr(){return J()&&typeof global.__NUXT_PATHS__<"u"}function Kr(){let e=!!(Me()&&document.querySelector("[ng-version]")),t=!!(M()&&typeof window.ng<"u");return e||t}function Wr(){return fe()&&typeof process.env=="object"&&process.env.npm_lifecycle_script?.startsWith("ng ")||!1}function Vr(){return typeof navigator<"u"&&typeof navigator.product<"u"&&navigator.product==="ReactNative"}function Hr(){return J()&&typeof global.expo<"u"}function Gr(){return M()}var Rn=[{platform:g.Expo,detectionMethod:Hr},{platform:g.ReactNative,detectionMethod:Vr},{platform:g.NextJs,detectionMethod:kr},{platform:g.Nuxt,detectionMethod:Lr},{platform:g.Angular,detectionMethod:Kr},{platform:g.React,detectionMethod:br},{platform:g.VueJs,detectionMethod:Rr},{platform:g.Svelte,detectionMethod:Nr},{platform:g.WebUnknown,detectionMethod:Gr},{platform:g.NextJsSSR,detectionMethod:Dr},{platform:g.NuxtSSR,detectionMethod:Fr},{platform:g.ReactSSR,detectionMethod:Or},{platform:g.VueJsSSR,detectionMethod:Ur},{platform:g.AngularSSR,detectionMethod:Wr},{platform:g.SvelteSSR,detectionMethod:Mr}];function jr(){return Rn.find(e=>e.detectionMethod())?.platform||g.ServerSideUnknown}var we,ke=[],De=!1,Un=10,Nn=10,Mn=1e3,Le=()=>{if(!we){if(we=jr(),De)for(;ke.length;)ke.pop()?.();else ke.forEach(e=>{e()});$r(g.ServerSideUnknown,Un),$r(g.WebUnknown,Nn)}return we},Br=e=>{De||ke.push(e)};function kn(){we=void 0}function $r(e,t){we===e&&!De&&setTimeout(()=>{kn(),De=!0,setTimeout(Le,Mn)},t)}var Dn={};var zr=(e,t)=>Dn[e]?.[t]?.additionalDetails;var qr="aws-amplify",Yr=e=>e.replace(/\+.*/,""),Dt=class{constructor(){this.userAgent=`${qr}/${Yr(kt)}`}get framework(){return Le()}get isReactNative(){return this.framework===g.ReactNative||this.framework===g.Expo}observeFrameworkChanges(t){Br(t)}},Ln=new Dt,Jr=({category:e,action:t}={})=>{let r=[[qr,Yr(kt)]];if(e&&r.push([e,t]),r.push(["framework",Le()]),e&&t){let o=zr(e,t);o&&o.forEach(n=>{r.push(n)})}return r},Ie=e=>Jr(e).map(([o,n])=>o&&n?`${o}/${n}`:o).join(" ");var ie=()=>typeof window<"u"&&typeof window.document<"u";var Xr=new y("Auth"),Fe=class{configure(t,r){this.authConfig=t,this.authOptions=r,t&&t.Cognito?.userPoolEndpoint&&Xr.warn(Qr("Amazon Cognito User Pool")),t&&t.Cognito?.identityPoolEndpoint&&Xr.warn(Qr("Amazon Cognito Identity Pool"))}async fetchAuthSession(t={}){let r,o,n=await this.getTokens(t);return n?(o=n.accessToken?.payload?.sub,r=await this.authOptions?.credentialsProvider?.getCredentialsAndIdentityId({authConfig:this.authConfig,tokens:n,authenticated:!0,forceRefresh:t.forceRefresh})):r=await this.authOptions?.credentialsProvider?.getCredentialsAndIdentityId({authConfig:this.authConfig,authenticated:!1,forceRefresh:t.forceRefresh}),{tokens:n,credentials:r?.credentials,identityId:r?.identityId,userSub:o}}async clearCredentials(){await this.authOptions?.credentialsProvider?.clearCredentialsAndIdentityId()}async getTokens(t){return await this.authOptions?.tokenProvider?.getTokens(t)??void 0}},Qr=e=>`You are using a custom Amazon ${e} endpoint, ensure the endpoint is correct.`;var Ke=class{constructor(){this.oAuthListener=void 0,this.isConfigured=!1,this.resourcesConfig={},this.libraryOptions={},this.Auth=new Fe}configure(t,r){let o=Ir(t);this.resourcesConfig=o,r&&(this.libraryOptions=r),this.resourcesConfig=yt(this.resourcesConfig),this.Auth.configure(this.resourcesConfig.Auth,this.libraryOptions.Auth),(this.resourcesConfig.Analytics?.Pinpoint||this.resourcesConfig.Notifications?.InAppMessaging?.Pinpoint||this.resourcesConfig.Notifications?.PushNotification?.Pinpoint)&&console.warn("AWS will end support for Amazon Pinpoint on October 30, 2026. The guidance is to use AWS End User Messaging for push notifications and SMS, Amazon Simple Email Service for sending emails, Amazon Connect for campaigns, journeys, endpoints, and engagement analytics. Pinpoint recommends Amazon Kinesis for event collection and mobile analytics."),U.dispatch("core",{event:"configure",data:this.resourcesConfig},"Configure",O),this.notifyOAuthListener(),this.isConfigured=!0}getConfig(){return this.isConfigured||console.warn("Amplify has not been configured. Please call Amplify.configure() before using this service."),this.resourcesConfig}[ye](t){this.resourcesConfig.Auth?.Cognito.loginWith?.oauth?t(this.resourcesConfig.Auth?.Cognito):this.oAuthListener=t}notifyOAuthListener(){!this.resourcesConfig.Auth?.Cognito.loginWith?.oauth||!this.oAuthListener||(this.oAuthListener(this.resourcesConfig.Auth?.Cognito),this.oAuthListener=void 0)}},V=new Ke;var Zr=(e,t)=>e.Auth.fetchAuthSession(t);var Lt=e=>Zr(V,e);var Ft=e=>{let{headers:t,statusCode:r}=e;return{...Fn(e)?e.$metadata:{},httpStatusCode:r,requestId:t["x-amzn-requestid"]??t["x-amzn-request-id"]??t["x-amz-request-id"],extendedRequestId:t["x-amz-id-2"],cfId:t["x-amz-cf-id"]}},Fn=e=>typeof e?.$metadata=="object";var Ae=async e=>{if(!e||e.statusCode<300)return;let t=await We(e),o=(s=>{let[c]=s.toString().split(/[,:]+/);return c.includes("#")?c.split("#")[1]:c})(e.headers["x-amzn-errortype"]??t.code??t.__type??"UnknownError"),n=t.message??t.Message??"Unknown error",i=new Error(n);return Object.assign(i,{name:o,$metadata:Ft(e)})},We=async e=>{if(!e.body)throw new Error("Missing response payload");let t=await e.body.json();return Object.assign(t,{$metadata:Ft(e)})};var Kt=(e,t,r,o)=>async(n,i)=>{let s={...o,...n},c=await s.endpointResolver(s,i),u=await t(i,c),a=await e(u,{...s});return r(a)};function eo(e=3e5){return o=>{let n=2**o*100+100*Math.random();return n>e?!1:n}}var Wt="amz-sdk-invocation-id",to="amz-sdk-request";var Vt=e=>{let r=eo(3e5)(e);return r===!1?3e5:r};var Wn=["AuthFailure","InvalidSignatureException","RequestExpired","RequestInTheFuture","RequestTimeTooSkewed","SignatureDoesNotMatch","BadRequestException"],ro=e=>!!e&&Wn.includes(e);var Ht=e=>async(t,r)=>{let o=r??await e(t)??void 0,n=o?.code||o?.name,i=t?.statusCode;return{retryable:jn(r)||Gn(i,n)||ro(n)||$n(i,n)}},Vn=["BandwidthLimitExceeded","EC2ThrottledException","LimitExceededException","PriorRequestNotComplete","ProvisionedThroughputExceededException","RequestLimitExceeded","RequestThrottled","RequestThrottledException","SlowDown","ThrottledException","Throttling","ThrottlingException","TooManyRequestsException"],Hn=["TimeoutError","RequestTimeout","RequestTimeoutException"],Gn=(e,t)=>e===429||!!t&&Vn.includes(t),jn=e=>[D.NetworkError,"ERR_NETWORK"].includes(e?.name),$n=(e,t)=>!!e&&[500,502,503,504].includes(e)||!!t&&Hn.includes(t);var io=({maxAttempts:e=3,retryDecider:t,computeDelay:r,abortSignal:o})=>{if(e<1)throw new Error("maxAttempts must be greater than 0");return(n,i)=>async function(c){let u,a=i.attemptsCount??0,f,m=()=>{if(f)return oo(f,a),f;throw oo(u,a),u};for(;!o?.aborted&&a<e;){try{f=await n(c),u=void 0}catch(_){u=_,f=void 0}a=(i.attemptsCount??0)>a?i.attemptsCount??0:a+1,i.attemptsCount=a;let{isCredentialsExpiredError:d,retryable:l}=await t(f,u,i);if(l){if(i.isCredentialsExpired=!!d,!o?.aborted&&a<e){let _=r(a);await Bn(_,o)}continue}else return m()}if(o?.aborted)throw new Error("Request aborted.");return m()}},Bn=(e,t)=>{if(t?.aborted)return Promise.resolve();let r,o,n=new Promise(i=>{o=i,r=setTimeout(i,e)});return t?.addEventListener("abort",function i(s){clearTimeout(r),t?.removeEventListener("abort",i),o()}),n},oo=(e,t)=>{Object.prototype.toString.call(e)==="[object Object]"&&(e.$metadata={...e.$metadata??{},attempts:t})};var so=It;var ao=()=>e=>async function(r){return r.headers[Wt]||(r.headers[Wt]=so()),e(r)};var co=({maxAttempts:e=3})=>(t,r)=>async function(n){let i=r.attemptsCount??0;return n.headers[to]=`attempt=${i+1}; max=${e}`,t(n)};var uo=({userAgentHeader:e="x-amz-user-agent",userAgentValue:t=""})=>r=>async function(n){if(t.trim().length===0)return await r(n);{let i=e.toLowerCase();return n.headers[i]=n.headers[i]?`${n.headers[i]} ${t}`:t,await r(n)}};var _e=(e,t)=>(r,o)=>{let n={},i=s=>e(s,o);for(let s=t.length-1;s>=0;s--){let c=t[s];i=c(o)(i,n)}return i(r)};var Ve=e=>{let t;return()=>(t||(t=e()),t)};var zn=e=>!["HEAD","GET"].includes(e.toUpperCase()),fo=async({url:e,method:t,headers:r,body:o},{abortSignal:n,cache:i,withCrossDomainCredentials:s})=>{let c;try{c=await fetch(e,{method:t,headers:r,body:zn(t)?o:void 0,signal:n,cache:i,credentials:s?"include":"same-origin"})}catch(m){throw m instanceof TypeError?new w({name:D.NetworkError,message:"A network error has occurred.",underlyingError:m}):m}let u={};c.headers?.forEach((m,d)=>{u[d.toLowerCase()]=m});let a={statusCode:c.status,headers:u,body:null},f=Object.assign(c.body??{},{text:Ve(()=>c.text()),blob:Ve(()=>c.blob()),json:Ve(()=>c.json())});return{...a,body:f}};var Gt=_e(fo,[uo,ao,io,co]);var jt={id:"aws",outputs:{dnsSuffix:"amazonaws.com"},regionRegex:"^(us|eu|ap|sa|ca|me|af)\\-\\w+\\-\\d+$",regions:["aws-global"]},lo={partitions:[jt,{id:"aws-cn",outputs:{dnsSuffix:"amazonaws.com.cn"},regionRegex:"^cn\\-\\w+\\-\\d+$",regions:["aws-cn-global"]}]};var $t=e=>{let{partitions:t}=lo;for(let{regions:r,outputs:o,regionRegex:n}of t){let i=new RegExp(n);if(r.includes(e)||i.test(e))return o.dnsSuffix}return jt.outputs.dnsSuffix};var B=URL;var z=class extends w{constructor(){super({name:D.PlatformNotSupported,message:"Function not supported on current platform"})}};var H=class{constructor(t){this.storage=t}async setItem(t,r){if(!this.storage)throw new z;this.storage.setItem(t,r)}async getItem(t){if(!this.storage)throw new z;return this.storage.getItem(t)}async removeItem(t){if(!this.storage)throw new z;this.storage.removeItem(t)}async clear(){if(!this.storage)throw new z;this.storage.clear()}};var se=class{constructor(){this.storage=new Map}get length(){return this.storage.size}key(t){return t>this.length-1?null:Array.from(this.storage.keys())[t]}setItem(t,r){this.storage.set(t,r)}getItem(t){return this.storage.get(t)??null}removeItem(t){this.storage.delete(t)}clear(){this.storage.clear()}};var po=new y("CoreStorageUtils"),He=()=>{try{if(typeof window<"u"&&window.localStorage)return window.localStorage}catch{po.info("localStorage not found. InMemoryStorage is used as a fallback.")}return new se},Ge=()=>{try{if(typeof window<"u"&&window.sessionStorage)return window.sessionStorage.getItem("test"),window.sessionStorage;throw new Error("sessionStorage is not defined")}catch{return po.info("sessionStorage not found. InMemoryStorage is used as a fallback."),new se}};var je=class extends H{constructor(){super(He())}};var $e=class extends H{constructor(){super(Ge())}};var Be=class{constructor(t){this._storage=t}get storage(){if(!this._storage)throw new z;return this._storage}setItem(t,r){this.storage.setItem(t,r)}getItem(t){return this.storage.getItem(t)}removeItem(t){this.storage.removeItem(t)}clear(){this.storage.clear()}};var ze=class extends Be{constructor(){super(Ge())}};var Ce=new je,qn=new $e,Yn=new ze,Jn=new H(new se);var Q={keyPrefix:"aws-amplify-cache",capacityInBytes:1048576,itemMaxSize:21e4,defaultTTL:2592e5,defaultPriority:5,warningThreshold:.8},q="CurSize";function Bt(e){let t=0;t=e.length;for(let r=e.length;r>=0;r-=1){let o=e.charCodeAt(r);o>127&&o<=2047?t+=1:o>2047&&o<=65535&&(t+=2),o>=56320&&o<=57343&&(r-=1)}return t}function Z(){return new Date().getTime()}var ae=e=>`${e}${q}`;var ee;(function(e){e.NoCacheItem="NoCacheItem",e.NullNextNode="NullNextNode",e.NullPreviousNode="NullPreviousNode"})(ee||(ee={}));var Xn={[ee.NoCacheItem]:{message:"Item not found in the cache storage."},[ee.NullNextNode]:{message:"Next node is null."},[ee.NullPreviousNode]:{message:"Previous node is null."}},zt=$(Xn);var S=new y("StorageCache"),qe=class{constructor({config:t,keyValueStorage:r}){this.config={...Q,...t},this.keyValueStorage=r,this.sanitizeConfig()}getModuleName(){return"Cache"}configure(t){return t&&(t.keyPrefix&&S.warn("keyPrefix can not be re-configured on an existing Cache instance."),this.config={...this.config,...t}),this.sanitizeConfig(),this.config}async getCurrentCacheSize(){let t=await this.getStorage().getItem(ae(this.config.keyPrefix));return t||(await this.getStorage().setItem(ae(this.config.keyPrefix),"0"),t="0"),Number(t)}async setItem(t,r,o){if(S.debug(`Set item: key is ${t}, value is ${r} with options: ${o}`),!t||t===q){S.warn(`Invalid key: should not be empty or reserved key: '${q}'`);return}if(typeof r>"u"){S.warn("The value of item should not be undefined!");return}let n={priority:o?.priority!==void 0?o.priority:this.config.defaultPriority,expires:o?.expires!==void 0?o.expires:this.config.defaultTTL+Z()};if(n.priority<1||n.priority>5){S.warn("Invalid parameter: priority due to out or range. It should be within 1 and 5.");return}let i=`${this.config.keyPrefix}${t}`,s=this.fillCacheItem(i,r,n);if(s.byteSize>this.config.itemMaxSize){S.warn(`Item with key: ${t} you are trying to put into is too big!`);return}try{let c=await this.getStorage().getItem(i);if(c&&await this.removeCacheItem(i,JSON.parse(c).byteSize),await this.isCacheFull(s.byteSize)){let u=await this.clearInvalidAndGetRemainingKeys();if(await this.isCacheFull(s.byteSize)){let a=await this.sizeToPop(s.byteSize);await this.popOutItems(u,a)}}return this.setCacheItem(i,s)}catch(c){S.warn(`setItem failed! ${c}`)}}async getItem(t,r){S.debug(`Get item: key is ${t} with options ${r}`);let o;if(!t||t===q)return S.warn(`Invalid key: should not be empty or reserved key: '${q}'`),null;let n=`${this.config.keyPrefix}${t}`;try{if(o=await this.getStorage().getItem(n),o!=null)if(await this.isExpired(n))await this.removeCacheItem(n,JSON.parse(o).byteSize);else return(await this.updateVisitedTime(JSON.parse(o),n)).data;if(r?.callback){let i=r.callback();return i!==null&&await this.setItem(t,i,r),i}return null}catch(i){return S.warn(`getItem failed! ${i}`),null}}async removeItem(t){if(S.debug(`Remove item: key is ${t}`),!t||t===q){S.warn(`Invalid key: should not be empty or reserved key: '${q}'`);return}let r=`${this.config.keyPrefix}${t}`;try{let o=await this.getStorage().getItem(r);o&&await this.removeCacheItem(r,JSON.parse(o).byteSize)}catch(o){S.warn(`removeItem failed! ${o}`)}}async getAllKeys(){try{return await this.getAllCacheKeys()}catch(t){return S.warn(`getAllkeys failed! ${t}`),[]}}getStorage(){return this.keyValueStorage}async isExpired(t){let r=await this.getStorage().getItem(t);zt(r!==null,ee.NoCacheItem,`Key: ${t}`);let o=JSON.parse(r);return Z()>=o.expires}async removeCacheItem(t,r){let o=await this.getStorage().getItem(t);zt(o!==null,ee.NoCacheItem,`Key: ${t}`);let n=r??JSON.parse(o).byteSize;await this.decreaseCurrentSizeInBytes(n);try{await this.getStorage().removeItem(t)}catch(i){await this.increaseCurrentSizeInBytes(n),S.error(`Failed to remove item: ${i}`)}}fillCacheItem(t,r,o){let n={key:t,data:r,timestamp:Z(),visitedTime:Z(),priority:o.priority??0,expires:o.expires??0,type:typeof r,byteSize:0};return n.byteSize=Bt(JSON.stringify(n)),n.byteSize=Bt(JSON.stringify(n)),n}sanitizeConfig(){this.config.itemMaxSize>this.config.capacityInBytes&&(S.error("Invalid parameter: itemMaxSize. It should be smaller than capacityInBytes. Setting back to default."),this.config.itemMaxSize=Q.itemMaxSize),(this.config.defaultPriority>5||this.config.defaultPriority<1)&&(S.error("Invalid parameter: defaultPriority. It should be between 1 and 5. Setting back to default."),this.config.defaultPriority=Q.defaultPriority),(Number(this.config.warningThreshold)>1||Number(this.config.warningThreshold)<0)&&(S.error("Invalid parameter: warningThreshold. It should be between 0 and 1. Setting back to default."),this.config.warningThreshold=Q.warningThreshold);let t=5*1024*1024;this.config.capacityInBytes>t&&(S.error("Cache Capacity should be less than 5MB. Setting back to default. Setting back to default."),this.config.capacityInBytes=Q.capacityInBytes)}async increaseCurrentSizeInBytes(t){let r=await this.getCurrentCacheSize();await this.getStorage().setItem(ae(this.config.keyPrefix),(r+t).toString())}async decreaseCurrentSizeInBytes(t){let r=await this.getCurrentCacheSize();await this.getStorage().setItem(ae(this.config.keyPrefix),(r-t).toString())}async updateVisitedTime(t,r){return t.visitedTime=Z(),await this.getStorage().setItem(r,JSON.stringify(t)),t}async setCacheItem(t,r){await this.increaseCurrentSizeInBytes(r.byteSize);try{await this.getStorage().setItem(t,JSON.stringify(r))}catch(o){await this.decreaseCurrentSizeInBytes(r.byteSize),S.error(`Failed to set item ${o}`)}}async sizeToPop(t){let o=await this.getCurrentCacheSize()+t-this.config.capacityInBytes,n=(1-this.config.warningThreshold)*this.config.capacityInBytes;return o>n?o:n}async isCacheFull(t){let r=await this.getCurrentCacheSize();return t+r>this.config.capacityInBytes}async popOutItems(t,r){let o=[],n=r;for(let i of t){let s=await this.getStorage().getItem(i);if(s!=null){let c=JSON.parse(s);o.push(c)}}o.sort((i,s)=>i.priority>s.priority?-1:i.priority<s.priority?1:i.visitedTime<s.visitedTime?-1:1);for(let i of o)if(await this.removeCacheItem(i.key,i.byteSize),n-=i.byteSize,n<=0)return}async clearInvalidAndGetRemainingKeys(){let t=[],r=await this.getAllCacheKeys({omitSizeKey:!0});for(let o of r)await this.isExpired(o)?await this.removeCacheItem(o):t.push(o);return t}async clear(){S.debug("Clear Cache");try{let t=await this.getAllKeys();for(let r of t){let o=`${this.config.keyPrefix}${r}`;await this.getStorage().removeItem(o)}}catch(t){S.warn(`clear failed! ${t}`)}}};var Qn=new y("StorageCache"),Ye=class e extends qe{constructor(t){let r=He();super({config:t,keyValueStorage:new H(r)}),this.storage=r,this.getItem=this.getItem.bind(this),this.setItem=this.setItem.bind(this),this.removeItem=this.removeItem.bind(this)}async getAllCacheKeys(t){let{omitSizeKey:r}=t??{},o=[];for(let n=0;n<this.storage.length;n++){let i=this.storage.key(n);r&&i===ae(this.config.keyPrefix)||i?.startsWith(this.config.keyPrefix)&&o.push(i.substring(this.config.keyPrefix.length))}return o}createInstance(t){return(!t.keyPrefix||t.keyPrefix===Q.keyPrefix)&&(Qn.error("invalid keyPrefix, setting keyPrefix with timeStamp"),t.keyPrefix=Z.toString()),new e(t)}};var Zn=new Ye;var ei=new y("I18n"),mo=class{constructor(){this._options=null,this._lang=null,this._dict={}}setDefaultLanguage(){!this._lang&&typeof window<"u"&&window&&window.navigator&&(this._lang=window.navigator.language),ei.debug(this._lang)}setLanguage(t){this._lang=t}get(t,r=void 0){if(this.setDefaultLanguage(),!this._lang)return typeof r<"u"?r:t;let o=this._lang,n=this.getByLanguage(t,o);return n||(o.indexOf("-")>0&&(n=this.getByLanguage(t,o.split("-")[0])),n)?n:typeof r<"u"?r:t}getByLanguage(t,r,o=null){if(!r)return o;let n=this._dict[r];return n?n[t]:o}putVocabulariesForLanguage(t,r){let o=this._dict[t];o||(o=this._dict[t]={}),this._dict[t]={...o,...r}}putVocabularies(t){Object.keys(t).forEach(r=>{this.putVocabulariesForLanguage(r,t[r])})}};var te;(function(e){e.NotConfigured="NotConfigured"})(te||(te={}));var ti={[te.NotConfigured]:{message:"i18n is not configured."}},xe=$(ti);var go=new y("I18n"),Je={language:null},L=null,Xe=class e{static configure(t){return go.debug("configure I18n"),t&&(Je=Object.assign({},Je,t.I18n||t),e.createInstance()),Je}static getModuleName(){return"I18n"}static createInstance(){go.debug("create I18n instance"),!L&&(L=new mo)}static setLanguage(t){e.checkConfig(),xe(!!L,te.NotConfigured),L.setLanguage(t)}static get(t,r){return e.checkConfig()?(xe(!!L,te.NotConfigured),L.get(t,r)):typeof r>"u"?t:r}static putVocabulariesForLanguage(t,r){e.checkConfig(),xe(!!L,te.NotConfigured),L.putVocabulariesForLanguage(t,r)}static putVocabularies(t){e.checkConfig(),xe(!!L,te.NotConfigured),L.putVocabularies(t)}static checkConfig(){return L||e.createInstance(),!0}};Xe.createInstance();var qt=e=>{let t="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",r=[],o=new Uint8Array(e);ge().getRandomValues(o);for(let n of o)r.push(t[n%t.length]);return r.join("")};function Yt(e){return(e.match(/.{2}/g)||[]).map(r=>String.fromCharCode(parseInt(r,16))).join("")}function Jt(e){return e.split("").map(t=>t.charCodeAt(0).toString(16).padStart(2,"0")).join("")}var Xt=e=>{let t;return async(...r)=>t||(t=new Promise((o,n)=>{e(...r).then(i=>{o(i)}).catch(i=>{n(i)}).finally(()=>{t=void 0})}),t)};function Qe({expiresAt:e,clockDrift:t,tolerance:r=5e3}){return Date.now()+t+r>e}function ho(e){return Array.from(e,t=>String.fromCodePoint(t)).join("")}var Qt={convert(e,t={urlSafe:!1,skipPadding:!1}){let r=typeof e=="string"?e:ho(e),o=lr()(r);return t.urlSafe&&(o=o.replace(/\+/g,"-").replace(/\//g,"_")),t.skipPadding&&(o=o.replace(/=/g,"")),o}};var I;(function(e){e.EmptySignInUsername="EmptySignInUsername",e.EmptySignInPassword="EmptySignInPassword",e.CustomAuthSignInPassword="CustomAuthSignInPassword",e.EmptySignUpUsername="EmptySignUpUsername",e.EmptySignUpPassword="EmptySignUpPassword",e.EmptyConfirmSignUpUsername="EmptyConfirmSignUpUsername",e.EmptyConfirmSignUpCode="EmptyConfirmSignUpCode",e.EmptyResendSignUpCodeUsername="EmptyresendSignUpCodeUsername",e.EmptyChallengeResponse="EmptyChallengeResponse",e.EmptyConfirmResetPasswordUsername="EmptyConfirmResetPasswordUsername",e.EmptyConfirmResetPasswordNewPassword="EmptyConfirmResetPasswordNewPassword",e.EmptyConfirmResetPasswordConfirmationCode="EmptyConfirmResetPasswordConfirmationCode",e.EmptyResetPasswordUsername="EmptyResetPasswordUsername",e.EmptyVerifyTOTPSetupCode="EmptyVerifyTOTPSetupCode",e.EmptyConfirmUserAttributeCode="EmptyConfirmUserAttributeCode",e.IncorrectMFAMethod="IncorrectMFAMethod",e.EmptyUpdatePassword="EmptyUpdatePassword",e.InvalidPreferredChallenge="InvalidPreferredChallenge"})(I||(I={}));var Of={[I.EmptyChallengeResponse]:{message:"challengeResponse is required to confirmSignIn"},[I.EmptyConfirmResetPasswordUsername]:{message:"username is required to confirmResetPassword"},[I.EmptyConfirmSignUpCode]:{message:"code is required to confirmSignUp"},[I.EmptyConfirmSignUpUsername]:{message:"username is required to confirmSignUp"},[I.EmptyConfirmResetPasswordConfirmationCode]:{message:"confirmationCode is required to confirmResetPassword"},[I.EmptyConfirmResetPasswordNewPassword]:{message:"newPassword is required to confirmResetPassword"},[I.EmptyResendSignUpCodeUsername]:{message:"username is required to confirmSignUp"},[I.EmptyResetPasswordUsername]:{message:"username is required to resetPassword"},[I.EmptySignInPassword]:{message:"password is required to signIn"},[I.EmptySignInUsername]:{message:"username is required to signIn"},[I.EmptySignUpPassword]:{message:"password is required to signUp"},[I.EmptySignUpUsername]:{message:"username is required to signUp"},[I.CustomAuthSignInPassword]:{message:"A password is not needed when signing in with CUSTOM_WITHOUT_SRP",recoverySuggestion:"Do not include a password in your signIn call."},[I.IncorrectMFAMethod]:{message:"Incorrect MFA method was chosen. It should be either SMS, TOTP, or EMAIL",recoverySuggestion:"Try to pass SMS, TOTP, or EMAIL as the challengeResponse"},[I.EmptyVerifyTOTPSetupCode]:{message:"code is required to verifyTotpSetup"},[I.EmptyUpdatePassword]:{message:"oldPassword and newPassword are required to changePassword"},[I.EmptyConfirmUserAttributeCode]:{message:"confirmation code is required to confirmUserAttribute"},[I.InvalidPreferredChallenge]:{message:"The preferred challenge is not enabled in your backend configuration",recoverySuggestion:"Ensure the authentication method is enabled in your Amplify backend configuration"}},x;(function(e){e.DEFAULT_MSG="Authentication Error",e.EMPTY_EMAIL="Email cannot be empty",e.EMPTY_PHONE="Phone number cannot be empty",e.EMPTY_USERNAME="Username cannot be empty",e.INVALID_USERNAME="The username should either be a string or one of the sign in types",e.EMPTY_PASSWORD="Password cannot be empty",e.EMPTY_CODE="Confirmation code cannot be empty",e.SIGN_UP_ERROR="Error creating account",e.NO_MFA="No valid MFA method provided",e.INVALID_MFA="Invalid MFA type",e.EMPTY_CHALLENGE="Challenge response cannot be empty",e.NO_USER_SESSION="Failed to get the session because the user is empty",e.NETWORK_ERROR="Network Error",e.DEVICE_CONFIG="Device tracking has not been configured in this User Pool",e.AUTOSIGNIN_ERROR="Please use your credentials to sign in",e.OAUTH_ERROR="Couldn't finish OAuth flow, check your User Pool HostedUI settings"})(x||(x={}));var Ze;(function(e){e.SignInException="SignInException",e.OAuthSignInError="OAuthSignInException"})(Ze||(Ze={}));var p=class e extends w{constructor(t){super(t),this.constructor=e,Object.setPrototypeOf(this,e.prototype)}};function yo(e){let t=e?.split("_")[0];if(!e||e.indexOf("_")<0||!t||typeof t!="string")throw new p({name:"InvalidUserPoolId",message:"Invalid user pool id provided."});return t}var Te="UserUnAuthenticatedException",So="UserAlreadyAuthenticatedException";var ri="InvalidRedirectException",oi="InvalidAppSchemeException",ni="InvalidPreferredRedirectUrlException",Eo=new p({name:ri,message:"signInRedirect or signOutRedirect had an invalid format or was not found.",recoverySuggestion:"Please make sure the signIn/Out redirect in your oauth config is valid."}),Lf=new p({name:oi,message:"A valid non-http app scheme was not found in the config.",recoverySuggestion:"Please make sure a valid custom app scheme is present in the config."}),wo=new p({name:ni,message:"The given preferredRedirectUrl does not match any items in the redirectSignOutUrls array from the config.",recoverySuggestion:"Please make sure a matching preferredRedirectUrl is provided."}),ii="InvalidOriginException",Io=new p({name:ii,message:"redirect is coming from a different origin. The oauth flow needs to be initiated from the same origin",recoverySuggestion:"Please call signInWithRedirect from the same origin."});var Ao="TokenRefreshException",_o="UnexpectedSignInInterruptionException";function Co(e){if(!e||!e.accessToken)throw new p({name:Te,message:"User needs to be authenticated to call this API.",recoverySuggestion:"Sign in before calling this API again."})}var si=new p({name:Ao,message:`Token refresh is not supported when authenticated with the 'implicit grant' (token) oauth flow. 
	Please change your oauth configuration to use 'code grant' flow.`,recoverySuggestion:`Please logout and change your Amplify configuration to use "code grant" flow. 
	E.g { responseType: 'code' }`}),ai=new p({name:Te,message:"User needs to be authenticated to call this API.",recoverySuggestion:"Sign in before calling this API again."});function xo(e){if(ui(e))throw si;if(!ci(e))throw ai}var To={inflightOAuth:"inflightOAuth",oauthSignIn:"oauthSignIn",oauthPKCE:"oauthPKCE",oauthState:"oauthState"};function vo(e){return e?.accessToken||e?.idToken}function ci(e){return vo(e)&&e?.refreshToken}function ui(e){return vo(e)&&!e?.refreshToken}var Po=async e=>{let t=e.getConfig().Auth?.Cognito;h(t);let r=await e.Auth.getTokens({forceRefresh:!1});Co(r);let{"cognito:username":o,sub:n}=r.idToken?.payload??{},i={username:o,userId:n},s=fi(r);return s&&(i.signInDetails=s),i};function fi(e){return e?.signInDetails}var et=async()=>Po(V);var tt=(e,t)=>Ie({category:Ee.Auth,action:e,...t});var bo=e=>(t,r)=>{let o=li(e),n=JSON.stringify(t);return di(r,o,n)},li=e=>({"content-type":"application/x-amz-json-1.1","x-amz-target":`AWSCognitoIdentityProviderService.${e}`}),di=({url:e},t,r)=>({headers:t,url:e,body:r,method:"POST"});function rt(e){if(!e||e.name==="Error"||e instanceof TypeError)throw new p({name:D.Unknown,message:"An unknown error has occurred.",underlyingError:e})}var Oo=()=>async e=>{if(e.statusCode>=300){let t=await Ae(e);throw rt(t),new p({name:t.name,message:t.message,metadata:t.$metadata})}return We(e)};var pi=()=>(e,t)=>async function(o){return o.headers["cache-control"]="no-store",e(o)},Ro=_e(Gt,[pi]);var ot="cognito-idp";var Uo={service:ot,retryDecider:Ht(Ae),computeDelay:Vt,get userAgentValue(){return Ie()},cache:"no-store"};var No=({region:e})=>({url:new B(`https://${ot}.${e}.${$t(e)}`)});var Mo=({endpointOverride:e})=>t=>e?{url:new B(e)}:No(t);var ko=e=>Kt(Ro,bo("GetTokensFromRefreshToken"),Oo(),{...Uo,...e});var mi=async({tokens:e,authConfig:t,username:r,clientMetadata:o})=>{h(t?.Cognito);let{userPoolId:n,userPoolClientId:i,userPoolEndpoint:s}=t.Cognito,c=yo(n);xo(e);let u=ko({endpointResolver:Mo({endpointOverride:s})}),{AuthenticationResult:a}=await u({region:c},{ClientId:i,RefreshToken:e.refreshToken,DeviceKey:e.deviceMetadata?.deviceKey,ClientMetadata:o}),f=P(a?.AccessToken??""),m=a?.IdToken?P(a.IdToken):void 0,{iat:d}=f.payload;if(!d)throw new p({name:"iatNotFoundException",message:"iat not found in access token"});let l=d*1e3-new Date().getTime();return{accessToken:f,idToken:m,clockDrift:l,refreshToken:a?.RefreshToken??e.refreshToken,username:r}},Do=Xt(mi);var Lo={accessToken:"accessToken",idToken:"idToken",oidcProvider:"oidcProvider",clockDrift:"clockDrift",refreshToken:"refreshToken",deviceKey:"deviceKey",randomPasswordKey:"randomPasswordKey",deviceGroupKey:"deviceGroupKey",signInDetails:"signInDetails",oauthMetadata:"oauthMetadata"};var ve;(function(e){e.InvalidAuthTokens="InvalidAuthTokens"})(ve||(ve={}));var gi={[ve.InvalidAuthTokens]:{message:"Invalid tokens.",recoverySuggestion:"Make sure the tokens are valid."}},Fo=$(gi);var Zt="CognitoIdentityServiceProvider";var nt=class{getKeyValueStorage(){if(!this.keyValueStorage)throw new p({name:"KeyValueStorageNotFoundException",message:"KeyValueStorage was not found in TokenStore"});return this.keyValueStorage}setKeyValueStorage(t){this.keyValueStorage=t}setAuthConfig(t){this.authConfig=t}async loadTokens(){try{let t=await this.getAuthKeys(),r=await this.getKeyValueStorage().getItem(t.accessToken);if(!r)throw new p({name:"NoSessionFoundException",message:"Auth session was not found. Make sure to call signIn."});let o=P(r),n=await this.getKeyValueStorage().getItem(t.idToken),i=n?P(n):void 0,s=await this.getKeyValueStorage().getItem(t.refreshToken)??void 0,c=await this.getKeyValueStorage().getItem(t.clockDrift)??"0",u=Number.parseInt(c),a=await this.getKeyValueStorage().getItem(t.signInDetails),f={accessToken:o,idToken:i,refreshToken:s,deviceMetadata:await this.getDeviceMetadata()??void 0,clockDrift:u,username:await this.getLastAuthUser()};return a&&(f.signInDetails=JSON.parse(a)),f}catch{return null}}async storeTokens(t){Fo(t!==void 0,ve.InvalidAuthTokens);let r=t.username;await this.getKeyValueStorage().setItem(this.getLastAuthUserKey(),r);let o=await this.getAuthKeys();await this.getKeyValueStorage().setItem(o.accessToken,t.accessToken.toString()),t.idToken?await this.getKeyValueStorage().setItem(o.idToken,t.idToken.toString()):await this.getKeyValueStorage().removeItem(o.idToken),t.refreshToken?await this.getKeyValueStorage().setItem(o.refreshToken,t.refreshToken):await this.getKeyValueStorage().removeItem(o.refreshToken),t.deviceMetadata&&(t.deviceMetadata.deviceKey&&await this.getKeyValueStorage().setItem(o.deviceKey,t.deviceMetadata.deviceKey),t.deviceMetadata.deviceGroupKey&&await this.getKeyValueStorage().setItem(o.deviceGroupKey,t.deviceMetadata.deviceGroupKey),await this.getKeyValueStorage().setItem(o.randomPasswordKey,t.deviceMetadata.randomPassword)),t.signInDetails?await this.getKeyValueStorage().setItem(o.signInDetails,JSON.stringify(t.signInDetails)):await this.getKeyValueStorage().removeItem(o.signInDetails),await this.getKeyValueStorage().setItem(o.clockDrift,`${t.clockDrift}`)}async clearTokens(){let t=await this.getAuthKeys();await Promise.all([this.getKeyValueStorage().removeItem(t.accessToken),this.getKeyValueStorage().removeItem(t.idToken),this.getKeyValueStorage().removeItem(t.clockDrift),this.getKeyValueStorage().removeItem(t.refreshToken),this.getKeyValueStorage().removeItem(t.signInDetails),this.getKeyValueStorage().removeItem(this.getLastAuthUserKey()),this.getKeyValueStorage().removeItem(t.oauthMetadata)])}async getDeviceMetadata(t){let r=await this.getAuthKeys(t),o=await this.getKeyValueStorage().getItem(r.deviceKey),n=await this.getKeyValueStorage().getItem(r.deviceGroupKey),i=await this.getKeyValueStorage().getItem(r.randomPasswordKey);return i&&n&&o?{deviceKey:o,deviceGroupKey:n,randomPassword:i}:null}async clearDeviceMetadata(t){let r=await this.getAuthKeys(t);await Promise.all([this.getKeyValueStorage().removeItem(r.deviceKey),this.getKeyValueStorage().removeItem(r.deviceGroupKey),this.getKeyValueStorage().removeItem(r.randomPasswordKey)])}async getAuthKeys(t){h(this.authConfig?.Cognito);let r=t??await this.getLastAuthUser();return hi(Zt,`${this.authConfig.Cognito.userPoolClientId}.${r}`)}getLastAuthUserKey(){h(this.authConfig?.Cognito);let t=this.authConfig.Cognito.userPoolClientId;return`${Zt}.${t}.LastAuthUser`}async getLastAuthUser(){return await this.getKeyValueStorage().getItem(this.getLastAuthUserKey())??"username"}async setOAuthMetadata(t){let{oauthMetadata:r}=await this.getAuthKeys();await this.getKeyValueStorage().setItem(r,JSON.stringify(t))}async getOAuthMetadata(){let{oauthMetadata:t}=await this.getAuthKeys(),r=await this.getKeyValueStorage().getItem(t);return r&&JSON.parse(r)}},hi=(e,t)=>er(Lo)(`${e}`,t);function er(e){let t=Object.values({...e});return(r,o)=>t.reduce((n,i)=>({...n,[i]:`${r}.${o}.${i}`}),{})}var Ko="amplify-signin-with-hostedUI",G="CognitoIdentityServiceProvider",it=class{constructor(t){this.keyValueStorage=t}async clearOAuthInflightData(){h(this.cognitoConfig);let t=j(G,this.cognitoConfig.userPoolClientId);await Promise.all([this.keyValueStorage.removeItem(t.inflightOAuth),this.keyValueStorage.removeItem(t.oauthPKCE),this.keyValueStorage.removeItem(t.oauthState)])}async clearOAuthData(){h(this.cognitoConfig);let t=j(G,this.cognitoConfig.userPoolClientId);return await this.clearOAuthInflightData(),await this.keyValueStorage.removeItem(Ko),this.keyValueStorage.removeItem(t.oauthSignIn)}loadOAuthState(){h(this.cognitoConfig);let t=j(G,this.cognitoConfig.userPoolClientId);return this.keyValueStorage.getItem(t.oauthState)}storeOAuthState(t){h(this.cognitoConfig);let r=j(G,this.cognitoConfig.userPoolClientId);return this.keyValueStorage.setItem(r.oauthState,t)}loadPKCE(){h(this.cognitoConfig);let t=j(G,this.cognitoConfig.userPoolClientId);return this.keyValueStorage.getItem(t.oauthPKCE)}storePKCE(t){h(this.cognitoConfig);let r=j(G,this.cognitoConfig.userPoolClientId);return this.keyValueStorage.setItem(r.oauthPKCE,t)}setAuthConfig(t){this.cognitoConfig=t}async loadOAuthInFlight(){h(this.cognitoConfig);let t=j(G,this.cognitoConfig.userPoolClientId);return await this.keyValueStorage.getItem(t.inflightOAuth)==="true"}async storeOAuthInFlight(t){h(this.cognitoConfig);let r=j(G,this.cognitoConfig.userPoolClientId);await this.keyValueStorage.setItem(r.inflightOAuth,`${t}`)}async loadOAuthSignIn(){h(this.cognitoConfig);let t=j(G,this.cognitoConfig.userPoolClientId),r=await this.keyValueStorage.getItem(Ko),[o,n]=(await this.keyValueStorage.getItem(t.oauthSignIn))?.split(",")??[];return{isOAuthSignIn:o==="true"||r==="true",preferPrivateSession:n==="true"}}async storeOAuthSignIn(t,r=!1){h(this.cognitoConfig);let o=j(G,this.cognitoConfig.userPoolClientId);await this.keyValueStorage.setItem(o.oauthSignIn,`${t},${r}`)}},j=(e,t)=>er(To)(e,t);var A=new it(Ce);var tr=[],Wo=e=>{tr.push(e)},st=()=>{for(;tr.length;)tr.pop()?.()};var at=class{constructor(){this.waitForInflightOAuth=ie()?async()=>{if(await A.loadOAuthInFlight())return this.inflightPromise?this.inflightPromise:(this.inflightPromise=new Promise((t,r)=>{Wo(t)}),this.inflightPromise)}:async()=>{}}setAuthConfig(t){A.setAuthConfig(t.Cognito),this.authConfig=t}setTokenRefresher(t){this.tokenRefresher=t}setAuthTokenStore(t){this.tokenStore=t}getTokenStore(){if(!this.tokenStore)throw new p({name:"EmptyTokenStoreException",message:"TokenStore not set"});return this.tokenStore}getTokenRefresher(){if(!this.tokenRefresher)throw new p({name:"EmptyTokenRefresherException",message:"TokenRefresher not set"});return this.tokenRefresher}setClientMetadataProvider(t){this.clientMetadataProvider=t}async getTokens(t){let r;try{h(this.authConfig?.Cognito)}catch{return null}await this.waitForInflightOAuth(),this.inflightPromise=void 0,r=await this.getTokenStore().loadTokens();let o=await this.getTokenStore().getLastAuthUser();if(r===null)return null;let n=!!r?.idToken&&Qe({expiresAt:(r.idToken?.payload?.exp??0)*1e3,clockDrift:r.clockDrift??0}),i=Qe({expiresAt:(r.accessToken?.payload?.exp??0)*1e3,clockDrift:r.clockDrift??0});return(t?.forceRefresh||n||i)&&(r=await this.refreshTokens({tokens:r,username:o,clientMetadata:t?.clientMetadata??await this.clientMetadataProvider?.()}),r===null)?null:{accessToken:r?.accessToken,idToken:r?.idToken,signInDetails:r?.signInDetails}}async refreshTokens({tokens:t,username:r,clientMetadata:o}){try{let{signInDetails:n}=t,i=await this.getTokenRefresher()({tokens:t,authConfig:this.authConfig,username:r,clientMetadata:o});return i.signInDetails=n,await this.setTokens({tokens:i}),U.dispatch("auth",{event:"tokenRefresh"},"Auth",O),i}catch(n){return this.handleErrors(n)}}handleErrors(t){if(rt(t),this.isAuthenticationError(t)&&this.clearTokens(),U.dispatch("auth",{event:"tokenRefresh_failure",data:{error:t}},"Auth",O),t.name.startsWith("NotAuthorizedException"))return null;throw t}isAuthenticationError(t){return["NotAuthorizedException","TokenRevokedException","UserNotFoundException","PasswordResetRequiredException","UserNotConfirmedException","RefreshTokenReuseException"].some(o=>t?.name?.startsWith?.(o))}async setTokens({tokens:t}){return this.getTokenStore().storeTokens(t)}async clearTokens(){return this.getTokenStore().clearTokens()}getDeviceMetadata(t){return this.getTokenStore().getDeviceMetadata(t)}clearDeviceMetadata(t){return this.getTokenStore().clearDeviceMetadata(t)}setOAuthMetadata(t){return this.getTokenStore().setOAuthMetadata(t)}getOAuthMetadata(){return this.getTokenStore().getOAuthMetadata()}};var ct=class{constructor(){this.authTokenStore=new nt,this.authTokenStore.setKeyValueStorage(Ce),this.tokenOrchestrator=new at,this.tokenOrchestrator.setAuthTokenStore(this.authTokenStore),this.tokenOrchestrator.setTokenRefresher(Do)}getTokens(t={}){return this.tokenOrchestrator.getTokens(t)}setKeyValueStorage(t){this.authTokenStore.setKeyValueStorage(t)}setClientMetadataProvider(t){this.tokenOrchestrator.setClientMetadataProvider(t)}setAuthConfig(t){this.authTokenStore.setAuthConfig(t),this.tokenOrchestrator.setAuthConfig(t)}};var yi=new ct,{tokenOrchestrator:ut}=yi;async function rr(e){if(e.AccessToken){let t=P(e.AccessToken),r=(t.payload.iat||0)*1e3,o=new Date().getTime(),n=r>0?r-o:0,i,s,c;e.RefreshToken&&(s=e.RefreshToken),e.IdToken&&(i=P(e.IdToken)),e?.NewDeviceMetadata&&(c=e.NewDeviceMetadata);let u={accessToken:t,idToken:i,refreshToken:s,clockDrift:n,deviceMetadata:c,username:e.username};e?.signInDetails&&(u.signInDetails=e.signInDetails),await ut.setTokens({tokens:u})}else throw new w({message:"Invalid tokens",name:"InvalidTokens",recoverySuggestion:"Check Cognito UserPool settings"})}var Si="Unable to get user session following successful sign-in.",Vo=async()=>{try{U.dispatch("auth",{event:"signedIn",data:await et()},"Auth",O)}catch(e){throw e.name===Te?new p({name:_o,message:Si,recoverySuggestion:"This most likely is due to auth tokens not being persisted. If you are using cookie store, please ensure cookies can be correctly set from your server."}):e}};async function Ho(){let e;try{e=await et()}catch{}if(e&&e.userId&&e.username)throw new p({name:So,message:"There is already a signed in user.",recoverySuggestion:"Call signOut before calling signIn again."})}var Dd=new y("AuthError");var Go={oauthSignInError:{message:x.OAUTH_ERROR,log:"Make sure Cognito Hosted UI has been configured correctly"},noConfig:{message:x.DEFAULT_MSG,log:`
            Error: Amplify has not been configured correctly.
            This error is typically caused by one of the following scenarios:

            1. Make sure you're passing the awsconfig object to Amplify.configure() in your app's entry point
                See https://aws-amplify.github.io/docs/js/authentication#configure-your-app for more information
            
            2. There might be multiple conflicting versions of amplify packages in your node_modules.
				Refer to our docs site for help upgrading Amplify packages (https://docs.amplify.aws/lib/troubleshooting/upgrading/q/platform/js)
        `},missingAuthConfig:{message:x.DEFAULT_MSG,log:`
            Error: Amplify has not been configured correctly. 
            The configuration object is missing required auth properties.
            This error is typically caused by one of the following scenarios:

            1. Did you run \`amplify push\` after adding auth via \`amplify add auth\`?
                See https://aws-amplify.github.io/docs/js/authentication#amplify-project-setup for more information

            2. This could also be caused by multiple conflicting versions of amplify packages, see (https://docs.amplify.aws/lib/troubleshooting/upgrading/q/platform/js) for help upgrading Amplify packages.
        `},emptyUsername:{message:x.EMPTY_USERNAME},invalidUsername:{message:x.INVALID_USERNAME},emptyPassword:{message:x.EMPTY_PASSWORD},emptyCode:{message:x.EMPTY_CODE},signUpError:{message:x.SIGN_UP_ERROR,log:"The first parameter should either be non-null string or object"},noMFA:{message:x.NO_MFA},invalidMFA:{message:x.INVALID_MFA},emptyChallengeResponse:{message:x.EMPTY_CHALLENGE},noUserSession:{message:x.NO_USER_SESSION},deviceConfig:{message:x.DEVICE_CONFIG},networkError:{message:x.NETWORK_ERROR},autoSignInError:{message:x.AUTOSIGNIN_ERROR},default:{message:x.DEFAULT_MSG}};var F=(e,t)=>new p({message:e??"An error has occurred during the oauth process.",name:Ze.OAuthSignInError,recoverySuggestion:t??Go.oauthSignInError.log});var ft;(function(e){e.NoConfig="noConfig",e.MissingAuthConfig="missingAuthConfig",e.EmptyUsername="emptyUsername",e.InvalidUsername="invalidUsername",e.EmptyPassword="emptyPassword",e.EmptyCode="emptyCode",e.SignUpError="signUpError",e.NoMFA="noMFA",e.InvalidMFA="invalidMFA",e.EmptyChallengeResponse="emptyChallengeResponse",e.NoUserSession="noUserSession",e.Default="default",e.DeviceConfig="deviceConfig",e.NetworkError="networkError",e.AutoSignInError="autoSignInError",e.OAuthSignInError="oauthSignInError"})(ft||(ft={}));var Ei="`signInWithRedirect` has been canceled.",wi="An error occurred while validating the state.",Ii="Try to initiate an OAuth flow from Amplify",or=async e=>{let t=await A.loadOAuthState(),r=e===t?t:void 0;if(!r)throw new p({name:ft.OAuthSignInError,message:e===null?Ei:wi,recoverySuggestion:e===null?void 0:Ii});return r};var lt=async({currentUrl:e,userAgentValue:t,clientId:r,redirectUri:o,responseType:n,domain:i,preferPrivateSession:s})=>{let c=new B(e),u=c.searchParams.get("error"),a=c.searchParams.get("error_description");if(u)throw F(a??u);return n==="code"?Ai({currentUrl:e,userAgentValue:t,clientId:r,redirectUri:o,domain:i,preferPrivateSession:s}):_i({currentUrl:e,redirectUri:o,preferPrivateSession:s})},Ai=async({currentUrl:e,userAgentValue:t,clientId:r,redirectUri:o,domain:n,preferPrivateSession:i})=>{let s=new B(e),c=s.searchParams.get("code"),u=s.searchParams.get("state");if(!c||!u)throw F("User cancelled OAuth flow.");let a=await or(u),f="https://"+n+"/oauth2/token",m=await A.loadPKCE(),d={grant_type:"authorization_code",code:c,client_id:r,redirect_uri:o,...m?{code_verifier:m}:{}},l=Object.entries(d).map(([ue,C])=>`${encodeURIComponent(ue)}=${encodeURIComponent(C)}`).join("&"),{access_token:_,refresh_token:N,id_token:K,error:Y,error_message:re,token_type:Pe,expires_in:be}=await(await fetch(f,{method:"POST",headers:{"Content-Type":"application/x-www-form-urlencoded",[gt]:t},body:l})).json();if(Y)throw F(re??Y);let ce=(_&&P(_).payload.username)??"username";return await rr({username:ce,AccessToken:_,IdToken:K,RefreshToken:N}),jo({redirectUri:o,state:a,preferPrivateSession:i})},_i=async({currentUrl:e,redirectUri:t,preferPrivateSession:r})=>{let o=new B(e),{id_token:n,access_token:i,state:s,token_type:c,expires_in:u,error_description:a,error:f}=(o.hash??"#").substring(1).split("&").map(l=>l.split("=")).reduce((l,[_,N])=>({...l,[_]:N}),{id_token:void 0,access_token:void 0,state:void 0,token_type:void 0,expires_in:void 0,error_description:void 0,error:void 0});if(f)throw F(a??f);if(!i)throw F("No access token returned from OAuth flow.");let m=await or(s),d=(i&&P(i).payload.username)??"username";return await rr({username:d,AccessToken:i,IdToken:n}),jo({redirectUri:t,state:m,preferPrivateSession:r})},jo=async({redirectUri:e,state:t,preferPrivateSession:r})=>{await ut.setOAuthMetadata({oauthSignIn:!0}),await A.clearOAuthData(),await A.storeOAuthSignIn(!0,r),st(),Ti(e),Ci(t)&&U.dispatch("auth",{event:"customOAuthState",data:Yt(xi(t))},"Auth",O),U.dispatch("auth",{event:"signInWithRedirect"},"Auth",O),await Vo()},Ci=e=>/-/.test(e),xi=e=>e.split("-").splice(1).join("-"),Ti=e=>{typeof window<"u"&&typeof window.history<"u"&&window.history.replaceState(window.history.state,"",e)};function dt(e,t){if(t){let r=e?.find(o=>o===t);if(!r)throw wo;return r}else{let r=e?.find(vi)??e?.find(Pi),o=e?.find(Oi)??e?.find(bi);if(r)return r;throw o?Io:Eo}}var vi=e=>e.startsWith(String(window.location.origin+(window.location.pathname||"/"))),Pi=e=>e.includes(String(window.location.hostname)),bi=e=>e.startsWith("http://"),Oi=e=>e.startsWith("https://");var le=async e=>{st(),await A.clearOAuthInflightData(),U.dispatch("auth",{event:"signInWithRedirect_failure",data:{error:e}},"Auth",O)};var $o=async e=>{try{h(e),he(e),A.setAuthConfig(e)}catch{return}if(await A.loadOAuthInFlight())try{let t=window.location.href,{loginWith:r,userPoolClientId:o}=e,{domain:n,redirectSignIn:i,responseType:s}=r.oauth,c=dt(i);await lt({currentUrl:t,clientId:o,domain:n,redirectUri:c,responseType:s,userAgentValue:tt(ne.SignInWithRedirect)})}catch(t){await le(t)}};ie()&&V[ye]($o);var Bo={Google:"Google",Facebook:"Facebook",Amazon:"LoginWithAmazon",Apple:"SignInWithApple"};var zo=async e=>{window?.location&&(window.location.href=e.replace("http://","https://"))};var qo="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",Yo=e=>{let t=new Uint8Array(e);ge().getRandomValues(t);let r="",o;for(let n of t)r+=qo.charAt(n%qo.length);return{value:r,method:"S256",toCodeChallenge(){return o||(o=Ri(r),o)}}};function Ri(e){let t=new Pr;return t.update(e),Ui(Qt.convert(t.digestSync(),{urlSafe:!0}))}function Ui(e){return e.replace(/=/g,"")}var Jo=()=>qt(32);var Xo=e=>{async function t(r){if(r.persisted&&await e.loadOAuthInFlight()){let n=F("User cancelled OAuth flow.");await le(n)}window.removeEventListener("pageshow",t)}window.addEventListener("pageshow",t)};async function Qo(e){let t=V.getConfig().Auth?.Cognito;h(t),he(t),A.setAuthConfig(t),e?.options?.prompt||await Ho();let r="COGNITO",o;return typeof e?.provider=="string"?r=Bo[e.provider]:e?.provider?.custom?r=e.provider.custom:e?.provider?.idpIdentifier&&({idpIdentifier:o}=e.provider),Ni({oauthConfig:t.loginWith.oauth,clientId:t.userPoolClientId,provider:r,idpIdentifier:o,customState:e?.customState,preferPrivateSession:e?.options?.preferPrivateSession,options:{loginHint:e?.options?.loginHint,lang:e?.options?.lang,nonce:e?.options?.nonce,prompt:e?.options?.prompt},authSessionOpener:e?.options?.authSessionOpener})}var Ni=async({oauthConfig:e,provider:t,idpIdentifier:r,clientId:o,customState:n,preferPrivateSession:i,options:s,authSessionOpener:c})=>{let{domain:u,redirectSignIn:a,responseType:f,scopes:m}=e,{loginHint:d,lang:l,nonce:_,prompt:N}=s??{},K=Jo(),Y=c||zo,re=n?`${K}-${Jt(n)}`:K,{value:Pe,method:be,toCodeChallenge:ce}=Yo(128),ue=dt(e.redirectSignIn);ie()&&A.storeOAuthInFlight(!0),A.storeOAuthState(re),A.storePKCE(Pe);let C=new URLSearchParams;C.append("redirect_uri",ue),C.append("response_type",f),C.append("client_id",o),r?C.append("idp_identifier",r):C.append("identity_provider",t),C.append("scope",m.join(" ")),d&&C.append("login_hint",d),l&&C.append("lang",l),_&&C.append("nonce",_),N&&C.append("prompt",N.toLowerCase()),C.append("state",re),f==="code"&&(C.append("code_challenge",ce()),C.append("code_challenge_method",be));let de=`https://${u}/oauth2/authorize?${C.toString()}`;Xo(A);let{type:k,error:Oe,url:Re}=await Y(de,a,i)??{};try{if(k==="error")throw F(String(Oe));if(k==="canceled")throw F(String(k));k==="success"&&Re&&await lt({currentUrl:Re,clientId:o,domain:u,redirectUri:ue,responseType:f,userAgentValue:tt(ne.SignInWithRedirect),preferPrivateSession:i})}catch(pe){throw await le(pe),pe}};export{V as Amplify,Lt as fetchAuthSession,Qo as signInWithRedirect};

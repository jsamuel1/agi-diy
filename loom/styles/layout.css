/* layout.css â€” App shell, sidebar, content area, panels */

.app { display: flex; height: 100vh; }

/* Sidebar */
.sidebar {
    width: 260px;
    background: var(--bg-elevated);
    border-right: 1px solid var(--divider);
    display: flex;
    flex-direction: column;
    flex-shrink: 0;
}
.sidebar-header {
    padding: 20px;
    padding-top: calc(20px + env(safe-area-inset-top));
    border-bottom: 1px solid var(--divider);
}
.brand { font-size: 18px; font-weight: 600; display: flex; align-items: center; gap: 8px; }
.brand-sub { font-size: 11px; color: var(--text-tertiary); font-weight: 400; }
.sidebar-content { flex: 1; overflow-y: auto; padding: 16px; }
.sidebar-section { margin-bottom: 24px; }
.sidebar-title {
    font-size: 10px;
    text-transform: uppercase;
    letter-spacing: 0.1em;
    color: var(--text-tertiary);
    margin-bottom: 12px;
    font-weight: 600;
}

/* Main Area */
.content-area { flex: 1; display: flex; flex-direction: column; min-width: 0; }
.content-panels { flex: 1; display: flex; min-height: 0; }
.chat-panel { flex: 1; display: flex; flex-direction: column; min-width: 0; }
.panel-resizer { width: 4px; cursor: col-resize; background: var(--divider); flex-shrink: 0; }
.panel-resizer:hover, .panel-resizer.dragging { background: var(--accent, #00ff88); }

/* Activity Panel */
.activity-panel { flex: 1; border-left: none; display: flex; flex-direction: column; overflow: hidden; min-width: 0; }
.activity-panel-header { padding: 8px 12px; border-bottom: 1px solid var(--divider); display: flex; align-items: center; gap: 6px; }
.activity-panel-header select { flex: 1; background: transparent; border: none; color: var(--text-secondary); font-size: 12px; font-weight: 600; text-transform: uppercase; letter-spacing: .05em; cursor: pointer; outline: none; }
.activity-panel-header select option { background: var(--bg); color: var(--text); }
.verbosity-select { background: transparent; border: 1px solid var(--divider); color: var(--text-tertiary); font-size: 10px; border-radius: 4px; padding: 2px 4px; cursor: pointer; outline: none; }
.verbosity-select option { background: var(--bg); color: var(--text); }

/* Verbosity levels: 1=chat, 2=+widgets, 3=+tool summary, 4=+tool details */
[data-verbosity="1"] .tool-block, [data-verbosity="1"] .sandbox-wrap { display: none !important; }
[data-verbosity="2"] .tool-block { display: none !important; }
[data-verbosity="3"] .tool-block details { display: none !important; }

.activity-feed { flex: 1; overflow-y: auto; padding: 8px 12px; font-size: 12px; }
.activity-feed .af-agent { font-weight: 600; margin-top: 8px; padding: 2px 0; }
.activity-feed .af-agent:first-child { margin-top: 0; }
.activity-feed .af-msg { color: #ccc; padding: 1px 0 1px 8px; border-left: 2px solid var(--agent-color, #555); line-height: 1.5; }
.activity-feed .af-tool { color: #888; padding: 1px 0 1px 8px; border-left: 2px solid var(--agent-color, #555); font-style: italic; }

/* Header */
.header {
    padding: 16px 24px;
    padding-top: calc(16px + env(safe-area-inset-top));
    border-bottom: 1px solid var(--divider);
    display: flex;
    justify-content: space-between;
    align-items: center;
}
.header-left { display: flex; align-items: center; gap: 12px; }
.current-agent { font-size: 14px; font-weight: 500; }
.current-agent-model { font-size: 11px; color: var(--text-tertiary); }
.header-right { display: flex; gap: 8px; }
.header-btn {
    padding: 8px 14px;
    border-radius: 8px;
    background: var(--glass);
    border: 1px solid var(--glass-border);
    color: var(--text-secondary);
    font-size: 12px;
    cursor: pointer;
    transition: all 0.2s;
    text-decoration: none;
    display: inline-flex;
    align-items: center;
    gap: 4px;
    min-height: 36px;
    -webkit-tap-highlight-color: transparent;
}
.header-btn:hover { background: var(--glass-hover); color: var(--text); }
.header-btn:active { transform: scale(0.95); }

/* Input */
.input-container {
    padding: 16px 24px;
    padding-bottom: calc(16px + env(safe-area-inset-bottom));
    border-top: 1px solid var(--divider);
}
.input-wrapper { max-width: 800px; margin: 0 auto; display: flex; gap: 12px; }
.target-select {
    background: var(--glass);
    border: 1px solid var(--glass-border);
    border-radius: 10px;
    padding: 0 12px;
    color: var(--text-secondary);
    font-size: 12px;
    cursor: pointer;
    min-width: 100px;
    height: 50px;
    -webkit-appearance: none;
    appearance: none;
    background-image: url("data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' width='12' height='12' viewBox='0 0 24 24' fill='none' stroke='rgba(255,255,255,0.5)' stroke-width='2'%3E%3Cpath d='M6 9l6 6 6-6'/%3E%3C/svg%3E");
    background-repeat: no-repeat;
    background-position: right 10px center;
    padding-right: 28px;
}
.target-select:focus { outline: none; border-color: rgba(255,255,255,0.2); }
.input-field {
    flex: 1;
    background: var(--glass);
    border: 1px solid var(--glass-border);
    border-radius: 12px;
    padding: 14px 18px;
    color: var(--text);
    font-size: 16px;
    resize: none;
    min-height: 50px;
    max-height: 150px;
    -webkit-appearance: none;
    appearance: none;
}
.input-field:focus { outline: none; border-color: rgba(255,255,255,0.2); }
.input-field::placeholder { color: var(--text-tertiary); }
.send-btn {
    width: 50px;
    height: 50px;
    border-radius: 12px;
    background: var(--glass);
    border: 1px solid var(--glass-border);
    color: var(--text-secondary);
    cursor: pointer;
    transition: all 0.2s;
    display: flex;
    align-items: center;
    justify-content: center;
    -webkit-tap-highlight-color: transparent;
}
.send-btn:hover { background: var(--glass-hover); color: var(--text); }
.send-btn:active { transform: scale(0.92); }
.send-btn:disabled { opacity: 0.3; cursor: not-allowed; }

/* Mobile menu button */
.mobile-menu-btn {
    display: none;
    padding: 8px;
    background: transparent;
    border: none;
    color: var(--text-secondary);
    font-size: 20px;
    cursor: pointer;
    -webkit-tap-highlight-color: transparent;
}

/* Mobile sidebar */
.mobile-sidebar {
    position: fixed;
    inset: 0;
    background: var(--bg-elevated);
    z-index: 150;
    transform: translateX(-100%);
    transition: transform 0.3s ease;
    overflow-y: auto;
    -webkit-overflow-scrolling: touch;
    padding-top: env(safe-area-inset-top);
    padding-bottom: env(safe-area-inset-bottom);
}
.mobile-sidebar.active { transform: translateX(0); }
.mobile-sidebar-close {
    position: absolute;
    top: calc(16px + env(safe-area-inset-top));
    right: 16px;
    background: transparent;
    border: none;
    color: var(--text-secondary);
    font-size: 28px;
    cursor: pointer;
    width: 44px;
    height: 44px;
    display: flex;
    align-items: center;
    justify-content: center;
    -webkit-tap-highlight-color: transparent;
}

/* Mobile responsive */
@media (max-width: 900px) {
    .sidebar { display: none; }
    .ring-panel { display: none; }
    .mobile-menu-btn { display: block; }
    .header {
        padding: 10px 16px;
        padding-top: calc(10px + env(safe-area-inset-top));
        flex-wrap: wrap;
        gap: 8px;
    }
    .header-left { gap: 8px; flex: 1; min-width: 0; }
    .header-right { gap: 6px; }
    .header-btn { padding: 6px 10px; font-size: 11px; }
    .current-agent { font-size: 13px; }
    .current-agent-model { font-size: 10px; }
    .messages-container { padding: 12px; }
    .messages-inner { max-width: 100%; }
    .message { margin-bottom: 24px; }
    .message-content { font-size: 14px; }
    .input-container { padding: 10px 12px; padding-bottom: calc(10px + env(safe-area-inset-bottom)); }
    .input-wrapper { gap: 8px; }
    .target-select { min-width: 70px; font-size: 12px; padding: 0 8px; }
    .input-field { padding: 12px 14px; min-height: 44px; }
    .send-btn { width: 44px; height: 44px; }
    .modal-content { max-height: 90vh; border-radius: 16px; }
    .modal-body { padding: 20px; }
    .modal-header { padding: 16px 20px; }
    .tabs { overflow-x: auto; -webkit-overflow-scrolling: touch; scrollbar-width: none; -ms-overflow-style: none; }
    .tabs::-webkit-scrollbar { display: none; }
    .tab { padding: 8px 12px; font-size: 12px; white-space: nowrap; }
    .tools-grid { grid-template-columns: 1fr; }
}

@media (max-width: 480px) {
    .header-right { gap: 4px; }
    .header-btn { padding: 5px 8px; font-size: 10px; }
}

@media (max-width: 1100px) { .activity-panel { display: none; } }
